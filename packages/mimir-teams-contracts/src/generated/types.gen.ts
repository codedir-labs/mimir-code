// This file is auto-generated by @hey-api/openapi-ts

export type ClientOptions = {
  baseUrl: 'https://teams.mimir.dev/api/v1' | 'http://localhost:3000/api/v1' | (string & {});
};

export type Uuid = string;

export type Timestamp = string;

export type User = {
  id: Uuid;
  email: string;
  fullName: string;
  createdAt: Timestamp;
};

export type OrganizationMembership = {
  orgId: Uuid;
  orgSlug: string;
  orgName: string;
  role: 'owner' | 'admin' | 'member';
  /**
   * User's email in this organization (for SSO)
   */
  email: string;
};

export type LoginRequest = {
  email: string;
  password: string;
  /**
   * Optional: specific organization to login to
   */
  orgSlug?: string;
};

export type LoginResponse = {
  accessToken: string;
  refreshToken: string;
  /**
   * Token expiration in seconds
   */
  expiresIn: number;
  user: User & {
    organizations: Array<OrganizationMembership>;
  };
  /**
   * Organization secret for HMAC signing
   */
  orgSecret: string;
};

export type RefreshRequest = {
  refreshToken: string;
  orgSlug: string;
};

export type RefreshResponse = {
  accessToken: string;
  refreshToken: string;
  expiresIn: number;
};

export type LogoutRequest = {
  refreshToken: string;
  orgSlug?: string;
  /**
   * Logout from all organizations
   */
  all?: boolean;
};

export type LogoutResponse = {
  success: boolean;
};

export type SubscriptionTier = 'free' | 'teams' | 'enterprise';

export type Organization = {
  id: Uuid;
  slug: string;
  name: string;
  subscriptionTier: SubscriptionTier;
  createdAt: Timestamp;
  updatedAt: Timestamp;
};

export type OrganizationWithRole = Organization & {
  role: 'owner' | 'admin' | 'member';
  userEmail: string;
};

export type OrganizationDetails = Organization & {
  budget: {
    monthlyLimit: number;
    currentUsage: number;
    remaining: number;
  };
  memberCount: number;
  teamCount: number;
};

export type TeamRole = 'admin' | 'developer' | 'viewer';

export type Team = {
  id: Uuid;
  orgId: Uuid;
  slug: string;
  name: string;
  description?: string;
  /**
   * Git repository URL
   */
  repository?: string;
  budgetMonthlyUsd?: number;
  createdAt: Timestamp;
  updatedAt: Timestamp;
};

export type TeamWithMemberInfo = Team & {
  role: TeamRole;
  memberCount: number;
  budget: {
    monthlyLimit?: number;
    currentUsage: number;
    remaining?: number;
  };
};

export type TeamContext = {
  teamId: Uuid;
  teamSlug: string;
  teamName: string;
  role: TeamRole;
};

export type DetectTeamRequest = {
  /**
   * Git repository URL
   */
  repository: string;
  userId: Uuid;
};

export type EnforcementConfig = {
  allowedModels?: Array<string>;
  blockedModels?: Array<string>;
  allowedProviders?: Array<string>;
  globalAllowlist?: Array<string>;
  globalBlocklist?: Array<string>;
  dockerMode?: 'local' | 'cloud' | 'auto';
  allowLocalOverrides?: boolean;
};

export type OrganizationConfig = {
  apiUrl: string;
  slug: string;
  name: string;
  enforcement: EnforcementConfig;
  offline?: {
    /**
     * Cache TTL in seconds
     */
    cacheTtl?: number;
  };
};

export type ConfigResponse = {
  organization: OrganizationConfig;
  /**
   * Team-level config overrides
   */
  team?: {
    [key: string]: unknown;
  };
  /**
   * Fully merged configuration
   */
  merged: {
    [key: string]: unknown;
  };
};

export type Error = {
  code: string;
  message: string;
  details?: {
    [key: string]: unknown;
  };
};

export type LoginData = {
  body: LoginRequest;
  path?: never;
  query?: never;
  url: '/auth/login';
};

export type LoginErrors = {
  /**
   * Invalid credentials
   */
  401: Error;
};

export type LoginError = LoginErrors[keyof LoginErrors];

export type LoginResponses = {
  /**
   * Successfully authenticated
   */
  200: LoginResponse;
};

export type LoginResponse2 = LoginResponses[keyof LoginResponses];

export type RefreshTokenData = {
  body: RefreshRequest;
  path?: never;
  query?: never;
  url: '/auth/refresh';
};

export type RefreshTokenErrors = {
  /**
   * Invalid refresh token
   */
  401: Error;
};

export type RefreshTokenError = RefreshTokenErrors[keyof RefreshTokenErrors];

export type RefreshTokenResponses = {
  /**
   * Token refreshed
   */
  200: RefreshResponse;
};

export type RefreshTokenResponse = RefreshTokenResponses[keyof RefreshTokenResponses];

export type LogoutData = {
  body: LogoutRequest;
  path?: never;
  query?: never;
  url: '/auth/logout';
};

export type LogoutResponses = {
  /**
   * Successfully logged out
   */
  200: LogoutResponse;
};

export type LogoutResponse2 = LogoutResponses[keyof LogoutResponses];

export type ListOrganizationsData = {
  body?: never;
  path?: never;
  query?: never;
  url: '/orgs';
};

export type ListOrganizationsResponses = {
  /**
   * List of organizations
   */
  200: {
    organizations: Array<OrganizationWithRole>;
  };
};

export type ListOrganizationsResponse =
  ListOrganizationsResponses[keyof ListOrganizationsResponses];

export type GetOrganizationData = {
  body?: never;
  path: {
    slug: string;
  };
  query?: never;
  url: '/orgs/{slug}';
};

export type GetOrganizationResponses = {
  /**
   * Organization details
   */
  200: {
    organization: OrganizationDetails;
  };
};

export type GetOrganizationResponse = GetOrganizationResponses[keyof GetOrganizationResponses];

export type GetConfigData = {
  body?: never;
  path: {
    slug: string;
  };
  query?: {
    team_id?: Uuid;
  };
  url: '/orgs/{slug}/config';
};

export type GetConfigResponses = {
  /**
   * Configuration
   */
  200: ConfigResponse;
};

export type GetConfigResponse = GetConfigResponses[keyof GetConfigResponses];

export type ListTeamsData = {
  body?: never;
  path: {
    slug: string;
  };
  query?: never;
  url: '/orgs/{slug}/teams';
};

export type ListTeamsResponses = {
  /**
   * List of teams
   */
  200: {
    teams: Array<TeamWithMemberInfo>;
  };
};

export type ListTeamsResponse = ListTeamsResponses[keyof ListTeamsResponses];

export type DetectTeamData = {
  body: DetectTeamRequest;
  path: {
    slug: string;
  };
  query?: never;
  url: '/orgs/{slug}/teams/detect';
};

export type DetectTeamResponses = {
  /**
   * Detected teams
   */
  200: {
    teams: Array<TeamContext>;
  };
};

export type DetectTeamResponse = DetectTeamResponses[keyof DetectTeamResponses];
